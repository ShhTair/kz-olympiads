<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÜ –û–ª–∏–º–ø–∏–∞–¥–Ω–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ | Kazakhstan Olympiad Database</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover { transition: all 0.3s; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="gradient-bg text-white py-12 mb-8">
        <div class="max-w-7xl mx-auto px-4">
            <h1 class="text-4xl font-bold mb-2">üèÜ –û–ª–∏–º–ø–∏–∞–¥–Ω–∏–∫–∏ –°–ù–ì –∏ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏</h1>
            <p class="text-xl opacity-90">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –æ–ª–∏–º–ø–∏–∞–¥ –∏–∑ —Å—Ç—Ä–∞–Ω –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏ –∏ –°–ù–ì</p>
            <p class="text-sm mt-2 opacity-75">CIS & Central Asia International Olympiad Database</p>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 pb-12">
        <!-- Search Bar & Filters -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <div class="flex flex-col gap-4">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <input
                            id="searchInput"
                            type="text"
                            placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –ª–∏–¥–µ—Ä–∞ –∏–ª–∏ –æ–ª–∏–º–ø–∏–∞–¥–µ..."
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                            oninput="performSearch()"
                        />
                    </div>
                </div>
                <div class="flex flex-wrap gap-2">
                    <select id="countryFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="updateView()">
                        <option value="">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã</option>
                        <optgroup label="–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è">
                            <option value="KAZ">üá∞üáø –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</option>
                            <option value="UZB">üá∫üáø –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</option>
                            <option value="KGZ">üá∞üá¨ –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω</option>
                            <option value="TJK">üáπüáØ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω</option>
                            <option value="TKM">üáπüá≤ –¢—É—Ä–∫–º–µ–Ω–∏—Å—Ç–∞–Ω</option>
                        </optgroup>
                        <optgroup label="–°–ù–ì">
                            <option value="RUS">üá∑üá∫ –†–æ—Å—Å–∏—è</option>
                            <option value="BLR">üáßüáæ –ë–µ–ª–∞—Ä—É—Å—å</option>
                            <option value="ARM">üá¶üá≤ –ê—Ä–º–µ–Ω–∏—è</option>
                            <option value="AZE">üá¶üáø –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω</option>
                            <option value="MDA">üá≤üá© –ú–æ–ª–¥–æ–≤–∞</option>
                        </optgroup>
                    </select>
                    <select id="olympiadFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="performSearch()">
                        <option value="">–í—Å–µ –æ–ª–∏–º–ø–∏–∞–¥—ã</option>
                        <option value="imo">IMO - –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                        <option value="ioi">IOI - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
                        <option value="ipho">IPhO - –§–∏–∑–∏–∫–∞</option>
                        <option value="icho">IChO - –•–∏–º–∏—è</option>
                        <option value="ibo">IBO - –ë–∏–æ–ª–æ–≥–∏—è</option>
                        <option value="iol">IOL - –õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞</option>
                    </select>
                    <select id="yearFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="performSearch()">
                        <option value="">–í—Å–µ –≥–æ–¥—ã</option>
                        <option value="2020-2026">2020-2026</option>
                        <option value="2015-2019">2015-2019</option>
                        <option value="2010-2014">2010-2014</option>
                        <option value="2006-2009">2006-2009</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–û–ª–∏–º–ø–∏–∞–¥ –≤ –±–∞–∑–µ</div>
                <div class="text-3xl font-bold text-purple-600">20+</div>
                <div class="text-xs text-gray-500 mt-1">IMO, IOI, IPhO, ICPC –∏ –¥—Ä.</div>
            </div>
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–°—Ç—Ä–∞–Ω</div>
                <div class="text-3xl font-bold text-blue-600">10</div>
                <div class="text-xs text-gray-500 mt-1">–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ê–∑–∏—è + –°–ù–ì</div>
            </div>
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
                <div class="text-3xl font-bold text-green-600">2500+</div>
                <div class="text-xs text-gray-500 mt-1">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã –∏ –æ–ª–∏–º–ø–∏–∞–¥—ã</div>
            </div>
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–ó–æ–ª–æ—Ç—ã—Ö –º–µ–¥–∞–ª–µ–π</div>
                <div class="text-3xl font-bold text-yellow-500">330+</div>
                <div class="text-xs text-gray-500 mt-1">–í—Å–µ —Å—Ç—Ä–∞–Ω—ã IMO+IOI</div>
            </div>
        </div>

        <!-- Country Comparison -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6">üåç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω (IMO)</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b-2 border-gray-200">
                            <th class="text-left py-3 px-2">–°—Ç—Ä–∞–Ω–∞</th>
                            <th class="text-center py-3 px-2">ü•á</th>
                            <th class="text-center py-3 px-2">ü•à</th>
                            <th class="text-center py-3 px-2">ü•â</th>
                            <th class="text-center py-3 px-2">–í—Å–µ–≥–æ</th>
                            <th class="text-center py-3 px-2">–õ—É—á—à–∏–π —Ä–∞–Ω–≥</th>
                            <th class="text-center py-3 px-2">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</th>
                        </tr>
                    </thead>
                    <tbody id="countryComparison">
                        <!-- Will be populated -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Olympiads List -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6">üìö –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –û–ª–∏–º–ø–∏–∞–¥—ã</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="olympiadsList">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Notable Participants IMO -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6" id="imoTitle">‚≠ê –í—ã–¥–∞—é—â–∏–µ—Å—è –£—á–∞—Å—Ç–Ω–∏–∫–∏ IMO (–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="notableParticipants">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Notable Participants IOI -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6" id="ioiTitle">üíª –í—ã–¥–∞—é—â–∏–µ—Å—è –£—á–∞—Å—Ç–Ω–∏–∫–∏ IOI (–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="notableParticipantsIOI">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Leaders -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6" id="leadersTitle">üë®‚Äçüè´ –õ–∏–¥–µ—Ä—ã –∏ –¢—Ä–µ–Ω–µ—Ä—ã (IMO)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="leadersList">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Search Results -->
        <div id="searchResults" class="hidden">
            <h2 class="text-2xl font-bold mb-6">üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ü–æ–∏—Å–∫–∞</h2>
            <div id="searchResultsContent"></div>
        </div>

        <!-- Footer -->
        <div class="mt-12 text-center text-gray-600 text-sm">
            <p>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–±—Ä–∞–Ω–∞ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –æ–ª–∏–º–ø–∏–∞–¥</p>
            <p class="mt-2">
                <a href="https://www.imo-official.org/" target="_blank" class="text-purple-600 hover:underline">IMO Official</a> ‚Ä¢
                <a href="https://ioinformatics.org/" target="_blank" class="text-purple-600 hover:underline">IOI Official</a> ‚Ä¢
                <a href="https://ipho-official.org/" target="_blank" class="text-purple-600 hover:underline">IPhO Official</a>
            </p>
            <p class="mt-4 text-xs">–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –æ–ª–∏–º–ø–∏–∞–¥–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ</p>
            <p class="text-xs text-gray-500 mt-1">2006-2026 ‚Ä¢ v1.0</p>
        </div>
    </div>

    <script>
        // Data will be loaded from JSON files
        let olympiadsData = [];
        let imoData = null;
        let ioiData = null;
        let iphoData = null;
        let countriesData = [];
        let selectedCountry = 'KAZ'; // Default to Kazakhstan

        // Load data
        async function loadData() {
            try {
                const olympiadsRes = await fetch('/data/olympiads-list.json');
                olympiadsData = await olympiadsRes.json();
                
                const countriesRes = await fetch('/data/countries.json');
                countriesData = await countriesRes.json();
                
                const imoRes = await fetch('/data/imo-countries.json');
                imoData = await imoRes.json();
                
                try {
                    const ioiRes = await fetch('/data/ioi-countries.json');
                    ioiData = await ioiRes.json();
                } catch (e) { console.log('IOI data not loaded'); }
                
                try {
                    const iphoRes = await fetch('/data/ipho-kazakhstan.json');
                    iphoData = await iphoRes.json();
                } catch (e) { console.log('IPhO data not loaded'); }
                
                renderOlympiads();
                renderCountryComparison();
                updateView();
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        function updateView() {
            selectedCountry = document.getElementById('countryFilter').value || 'KAZ';
            const country = countriesData.find(c => c.code === selectedCountry);
            const countryName = country ? country.nameRu : '–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω';
            const flag = country ? country.flag : 'üá∞üáø';
            
            document.getElementById('imoTitle').textContent = `‚≠ê –í—ã–¥–∞—é—â–∏–µ—Å—è –£—á–∞—Å—Ç–Ω–∏–∫–∏ IMO ${flag} ${countryName}`;
            document.getElementById('ioiTitle').textContent = `üíª –í—ã–¥–∞—é—â–∏–µ—Å—è –£—á–∞—Å—Ç–Ω–∏–∫–∏ IOI ${flag} ${countryName}`;
            document.getElementById('leadersTitle').textContent = `üë®‚Äçüè´ –õ–∏–¥–µ—Ä—ã –∏ –¢—Ä–µ–Ω–µ—Ä—ã IMO ${flag} ${countryName}`;
            
            renderNotableParticipants();
            renderNotableParticipantsIOI();
            renderLeaders();
        }

        function renderNotableParticipantsIOI() {
            if (!ioiData) return;
            const countryData = ioiData.countries[selectedCountry];
            if (!countryData || !countryData.topScorers || countryData.topScorers.length === 0) {
                document.getElementById('notableParticipantsIOI').innerHTML = '<div class="col-span-full text-center text-gray-500 py-8">–î–∞–Ω–Ω—ã–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è</div>';
                return;
            }
            const container = document.getElementById('notableParticipantsIOI');
            container.innerHTML = countryData.topScorers.map(p => `
                <a href="/participant.html?olympiad=ioi&name=${encodeURIComponent(p.name)}" 
                   class="block border border-gray-200 rounded-lg p-4 card-hover hover:border-blue-300 transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="font-semibold text-gray-900">${p.name}</div>
                            <div class="text-sm text-gray-600">${p.nameRu}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-gray-500">${p.years.join(', ')}</div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-1 mb-2">
                        ${p.medals.map(m => {
                            const color = m.includes('Gold') ? 'yellow' : m.includes('Silver') ? 'gray' : 'orange';
                            return `<span class="px-2 py-1 bg-${color}-100 text-${color}-700 text-xs rounded">${m}</span>`;
                        }).join('')}
                    </div>
                    ${p.notes ? `<div class="text-xs text-gray-500 mt-2">${p.notes}</div>` : ''}
                    <div class="text-xs text-blue-600 mt-2">Scores: ${p.scores.join(', ')} ‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>
                </a>
            `).join('');
        }

        function renderOlympiads() {
            const container = document.getElementById('olympiadsList');
            container.innerHTML = olympiadsData.map(o => `
                <a href="/olympiad.html?id=${o.id}" 
                   class="block border border-gray-200 rounded-lg p-4 card-hover hover:border-purple-300 transition-colors">
                    <div class="font-semibold text-gray-900">${o.id.toUpperCase()}</div>
                    <div class="text-sm text-gray-700 mt-1">${o.nameRu}</div>
                    <div class="text-xs text-gray-500 mt-2">${o.subject}</div>
                    <div class="flex flex-wrap gap-1 mt-2">
                        ${o.tags.map(tag => `<span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded">${tag}</span>`).join('')}
                    </div>
                    ${o.kazParticipationStart ? `<div class="text-xs text-purple-600 mt-2">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω —Å ${o.kazParticipationStart} ‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>` : '<div class="text-xs text-gray-400 mt-2">–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>'}
                </a>
            `).join('');
        }

        function renderCountryComparison() {
            if (!imoData || !countriesData) return;
            const container = document.getElementById('countryComparison');
            
            const rows = Object.entries(imoData.countries)
                .map(([code, data]) => {
                    const country = countriesData.find(c => c.code === code);
                    const total = data.totalMedals.gold + data.totalMedals.silver + data.totalMedals.bronze;
                    return { code, data, country, total };
                })
                .sort((a, b) => b.data.totalMedals.gold - a.data.totalMedals.gold)
                .slice(0, 10);

            container.innerHTML = rows.map((row, i) => `
                <tr class="border-b border-gray-100 hover:bg-gray-50">
                    <td class="py-3 px-2">
                        <a href="/olympiad.html?id=imo&country=${row.code}" class="flex items-center gap-2 hover:text-purple-600">
                            <span class="text-2xl">${row.country?.flag || ''}</span>
                            <span class="font-medium">${row.country?.nameRu || row.code}</span>
                        </a>
                    </td>
                    <td class="text-center py-3 px-2 font-semibold text-yellow-600">${row.data.totalMedals.gold}</td>
                    <td class="text-center py-3 px-2 font-semibold text-gray-600">${row.data.totalMedals.silver}</td>
                    <td class="text-center py-3 px-2 font-semibold text-orange-600">${row.data.totalMedals.bronze}</td>
                    <td class="text-center py-3 px-2 font-bold">${row.total}</td>
                    <td class="text-center py-3 px-2 text-green-600 font-semibold">#${row.data.bestRank}</td>
                    <td class="text-center py-3 px-2 text-gray-600">${row.data.totalParticipants}</td>
                </tr>
            `).join('');
        }

        function renderNotableParticipants() {
            if (!imoData) return;
            const countryData = imoData.countries[selectedCountry];
            if (!countryData || !countryData.notableParticipants) {
                document.getElementById('notableParticipants').innerHTML = '<div class="col-span-full text-center text-gray-500 py-8">–î–∞–Ω–Ω—ã–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è</div>';
                return;
            }
            const container = document.getElementById('notableParticipants');
            container.innerHTML = countryData.notableParticipants.map(p => `
                <a href="/participant.html?olympiad=imo&name=${encodeURIComponent(p.name)}" 
                   class="block border border-gray-200 rounded-lg p-4 card-hover hover:border-purple-300 transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="font-semibold text-gray-900">${p.name}</div>
                            <div class="text-sm text-gray-600">${p.nameRu}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-gray-500">${p.years.join(', ')}</div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-1 mb-2">
                        ${p.medals.map(m => {
                            const color = m.includes('Gold') ? 'yellow' : m.includes('Silver') ? 'gray' : 'orange';
                            return `<span class="px-2 py-1 bg-${color}-100 text-${color}-700 text-xs rounded">${m}</span>`;
                        }).join('')}
                    </div>
                    ${p.notes ? `<div class="text-xs text-gray-500 mt-2">${p.notes}</div>` : ''}
                    <div class="text-xs text-purple-600 mt-2">Scores: ${p.scores.join(', ')} ‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>
                </a>
            `).join('');
        }

        function renderLeaders() {
            if (!imoData) return;
            const countryData = imoData.countries[selectedCountry];
            if (!countryData || !countryData.leaders) {
                document.getElementById('leadersList').innerHTML = '<div class="col-span-full text-center text-gray-500 py-8">–î–∞–Ω–Ω—ã–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è</div>';
                return;
            }
            const container = document.getElementById('leadersList');
            container.innerHTML = countryData.leaders.map(l => `
                <div class="border border-gray-200 rounded-lg p-4 card-hover">
                    <div class="font-semibold text-gray-900">${l.name}</div>
                    <div class="text-sm text-gray-600">${l.nameRu}</div>
                    <div class="text-xs text-purple-600 mt-2">${l.role}</div>
                    <div class="text-xs text-gray-500 mt-1">${l.years.length} –ª–µ—Ç: ${l.years.join(', ')}</div>
                    ${l.notes ? `<div class="text-xs text-gray-400 mt-2">${l.notes}</div>` : ''}
                </div>
            `).join('');
        }

        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const olympiadFilter = document.getElementById('olympiadFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;

            if (!searchTerm && !olympiadFilter && !yearFilter) {
                document.getElementById('searchResults').classList.add('hidden');
                return;
            }

            document.getElementById('searchResults').classList.remove('hidden');
            
            let results = [];
            
            // Search in IMO data
            if (!olympiadFilter || olympiadFilter === 'imo') {
                if (searchTerm) {
                    // Search participants
                    results.push(...(imoData?.notableParticipants || [])
                        .filter(p => 
                            p.name.toLowerCase().includes(searchTerm) || 
                            p.nameRu.toLowerCase().includes(searchTerm)
                        )
                        .map(p => ({ type: 'participant', data: p, olympiad: 'IMO' }))
                    );
                    
                    // Search leaders
                    results.push(...(imoData?.leaders || [])
                        .filter(l => 
                            l.name.toLowerCase().includes(searchTerm) || 
                            l.nameRu.toLowerCase().includes(searchTerm)
                        )
                        .map(l => ({ type: 'leader', data: l, olympiad: 'IMO' }))
                    );
                }
            }

            // Search in IOI data
            if (!olympiadFilter || olympiadFilter === 'ioi') {
                if (searchTerm) {
                    results.push(...(ioiData?.topScorers || [])
                        .filter(p => 
                            p.name.toLowerCase().includes(searchTerm) || 
                            p.nameRu.toLowerCase().includes(searchTerm)
                        )
                        .map(p => ({ type: 'participant', data: p, olympiad: 'IOI' }))
                    );
                }
            }

            renderSearchResults(results);
        }

        function renderSearchResults(results) {
            const container = document.getElementById('searchResultsContent');
            
            if (results.length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-8">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                return;
            }

            container.innerHTML = `
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="text-sm text-gray-600 mb-4">–ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: ${results.length}</div>
                    <div class="space-y-4">
                        ${results.map(r => {
                            if (r.type === 'participant') {
                                return `
                                    <div class="border-l-4 border-purple-500 pl-4 py-2">
                                        <div class="font-semibold">${r.data.name} (${r.data.nameRu})</div>
                                        <div class="text-sm text-gray-600">${r.olympiad} ‚Ä¢ ${r.data.years.join(', ')}</div>
                                        <div class="text-sm text-gray-500 mt-1">${r.data.medals.join(', ')}</div>
                                        ${r.data.notes ? `<div class="text-xs text-gray-400 mt-1">${r.data.notes}</div>` : ''}
                                    </div>
                                `;
                            } else if (r.type === 'leader') {
                                return `
                                    <div class="border-l-4 border-blue-500 pl-4 py-2">
                                        <div class="font-semibold">${r.data.name} (${r.data.nameRu})</div>
                                        <div class="text-sm text-gray-600">${r.olympiad} ‚Ä¢ ${r.data.role}</div>
                                        <div class="text-sm text-gray-500 mt-1">${r.data.years.length} –ª–µ—Ç: ${r.data.years.join(', ')}</div>
                                        ${r.data.notes ? `<div class="text-xs text-gray-400 mt-1">${r.data.notes}</div>` : ''}
                                    </div>
                                `;
                            }
                        }).join('')}
                    </div>
                </div>
            `;
        }

        // Load data on page load
        loadData();
    </script>
</body>
</html>
