<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèÜ –û–ª–∏–º–ø–∏–∞–¥–Ω–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞ | Kazakhstan Olympiad Database</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover { transition: all 0.3s; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <div class="gradient-bg text-white py-12 mb-8">
        <div class="max-w-7xl mx-auto px-4">
            <h1 class="text-4xl font-bold mb-2">üèÜ –û–ª–∏–º–ø–∏–∞–¥–Ω–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞</h1>
            <p class="text-xl opacity-90">–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –æ–ª–∏–º–ø–∏–∞–¥ –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω (2006-2026)</p>
            <p class="text-sm mt-2 opacity-75">Kazakhstan International Olympiad Database</p>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 pb-12">
        <!-- Search Bar -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-1">
                    <input
                        id="searchInput"
                        type="text"
                        placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –ª–∏–¥–µ—Ä–∞ –∏–ª–∏ –æ–ª–∏–º–ø–∏–∞–¥–µ..."
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"
                        oninput="performSearch()"
                    />
                </div>
                <div class="flex gap-2">
                    <select id="olympiadFilter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="performSearch()">
                        <option value="">–í—Å–µ –æ–ª–∏–º–ø–∏–∞–¥—ã</option>
                        <option value="imo">IMO - –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</option>
                        <option value="ioi">IOI - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
                        <option value="ipho">IPhO - –§–∏–∑–∏–∫–∞</option>
                        <option value="icho">IChO - –•–∏–º–∏—è</option>
                        <option value="ibo">IBO - –ë–∏–æ–ª–æ–≥–∏—è</option>
                        <option value="iol">IOL - –õ–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞</option>
                    </select>
                    <select id="yearFilter" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onchange="performSearch()">
                        <option value="">–í—Å–µ –≥–æ–¥—ã</option>
                        <option value="2020-2026">2020-2026</option>
                        <option value="2015-2019">2015-2019</option>
                        <option value="2010-2014">2010-2014</option>
                        <option value="2006-2009">2006-2009</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–û–ª–∏–º–ø–∏–∞–¥ –≤ –±–∞–∑–µ</div>
                <div class="text-3xl font-bold text-purple-600">20+</div>
                <div class="text-xs text-gray-500 mt-1">IMO, IOI, IPhO, ICPC –∏ –¥—Ä.</div>
            </div>
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</div>
                <div class="text-3xl font-bold text-blue-600">400+</div>
                <div class="text-xs text-gray-500 mt-1">IMO (195), IOI (69), IPhO (150+)</div>
            </div>
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–ó–æ–ª–æ—Ç—ã—Ö –º–µ–¥–∞–ª–µ–π</div>
                <div class="text-3xl font-bold text-yellow-500">23+</div>
                <div class="text-xs text-gray-500 mt-1">IMO (15), IOI (3), IPhO (5+)</div>
            </div>
            <div class="bg-white rounded-lg shadow p-6 card-hover">
                <div class="text-sm text-gray-600 mb-1">–õ—É—á—à–∏–µ —Ä–∞–Ω–≥–∏</div>
                <div class="text-3xl font-bold text-green-600">#5 / #15</div>
                <div class="text-xs text-gray-500 mt-1">IMO'10 (–ê—Å—Ç–∞–Ω–∞) / IOI'07</div>
            </div>
        </div>

        <!-- Olympiads List -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6">üìö –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –û–ª–∏–º–ø–∏–∞–¥—ã</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="olympiadsList">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Notable Participants IMO -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6">‚≠ê –í—ã–¥–∞—é—â–∏–µ—Å—è –£—á–∞—Å—Ç–Ω–∏–∫–∏ IMO (–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="notableParticipants">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Notable Participants IOI -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6">üíª –í—ã–¥–∞—é—â–∏–µ—Å—è –£—á–∞—Å—Ç–Ω–∏–∫–∏ IOI (–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="notableParticipantsIOI">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Leaders -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold mb-6">üë®‚Äçüè´ –õ–∏–¥–µ—Ä—ã –∏ –¢—Ä–µ–Ω–µ—Ä—ã (IMO)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="leadersList">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Search Results -->
        <div id="searchResults" class="hidden">
            <h2 class="text-2xl font-bold mb-6">üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ü–æ–∏—Å–∫–∞</h2>
            <div id="searchResultsContent"></div>
        </div>

        <!-- Footer -->
        <div class="mt-12 text-center text-gray-600 text-sm">
            <p>–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–±—Ä–∞–Ω–∞ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –æ–ª–∏–º–ø–∏–∞–¥</p>
            <p class="mt-2">
                <a href="https://www.imo-official.org/" target="_blank" class="text-purple-600 hover:underline">IMO Official</a> ‚Ä¢
                <a href="https://ioinformatics.org/" target="_blank" class="text-purple-600 hover:underline">IOI Official</a> ‚Ä¢
                <a href="https://ipho-official.org/" target="_blank" class="text-purple-600 hover:underline">IPhO Official</a>
            </p>
            <p class="mt-4 text-xs">–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –æ–ª–∏–º–ø–∏–∞–¥–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ</p>
            <p class="text-xs text-gray-500 mt-1">2006-2026 ‚Ä¢ v1.0</p>
        </div>
    </div>

    <script>
        // Data will be loaded from JSON files
        let olympiadsData = [];
        let imoData = null;
        let ioiData = null;
        let iphoData = null;

        // Load data
        async function loadData() {
            try {
                const olympiadsRes = await fetch('/data/olympiads-list.json');
                olympiadsData = await olympiadsRes.json();
                
                const imoRes = await fetch('/data/imo-kazakhstan.json');
                imoData = await imoRes.json();
                
                try {
                    const ioiRes = await fetch('/data/ioi-kazakhstan.json');
                    ioiData = await ioiRes.json();
                } catch (e) { console.log('IOI data not loaded'); }
                
                try {
                    const iphoRes = await fetch('/data/ipho-kazakhstan.json');
                    iphoData = await iphoRes.json();
                } catch (e) { console.log('IPhO data not loaded'); }
                
                renderOlympiads();
                renderNotableParticipants();
                renderNotableParticipantsIOI();
                renderLeaders();
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        function renderNotableParticipantsIOI() {
            if (!ioiData) return;
            const container = document.getElementById('notableParticipantsIOI');
            container.innerHTML = ioiData.topScorers.map(p => `
                <a href="/participant.html?olympiad=ioi&name=${encodeURIComponent(p.name)}" 
                   class="block border border-gray-200 rounded-lg p-4 card-hover hover:border-blue-300 transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="font-semibold text-gray-900">${p.name}</div>
                            <div class="text-sm text-gray-600">${p.nameRu}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-gray-500">${p.years.join(', ')}</div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-1 mb-2">
                        ${p.medals.map(m => {
                            const color = m.includes('Gold') ? 'yellow' : m.includes('Silver') ? 'gray' : 'orange';
                            return `<span class="px-2 py-1 bg-${color}-100 text-${color}-700 text-xs rounded">${m}</span>`;
                        }).join('')}
                    </div>
                    ${p.notes ? `<div class="text-xs text-gray-500 mt-2">${p.notes}</div>` : ''}
                    <div class="text-xs text-blue-600 mt-2">Scores: ${p.scores.join(', ')} ‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>
                </a>
            `).join('');
        }

        function renderOlympiads() {
            const container = document.getElementById('olympiadsList');
            container.innerHTML = olympiadsData.map(o => `
                <a href="/olympiad.html?id=${o.id}" 
                   class="block border border-gray-200 rounded-lg p-4 card-hover hover:border-purple-300 transition-colors">
                    <div class="font-semibold text-gray-900">${o.id.toUpperCase()}</div>
                    <div class="text-sm text-gray-700 mt-1">${o.nameRu}</div>
                    <div class="text-xs text-gray-500 mt-2">${o.subject}</div>
                    <div class="flex flex-wrap gap-1 mt-2">
                        ${o.tags.map(tag => `<span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded">${tag}</span>`).join('')}
                    </div>
                    ${o.kazParticipationStart ? `<div class="text-xs text-purple-600 mt-2">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω —Å ${o.kazParticipationStart} ‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>` : '<div class="text-xs text-gray-400 mt-2">–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>'}
                </a>
            `).join('');
        }

        function renderNotableParticipants() {
            if (!imoData) return;
            const container = document.getElementById('notableParticipants');
            container.innerHTML = imoData.notableParticipants.map(p => `
                <a href="/participant.html?olympiad=imo&name=${encodeURIComponent(p.name)}" 
                   class="block border border-gray-200 rounded-lg p-4 card-hover hover:border-purple-300 transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="font-semibold text-gray-900">${p.name}</div>
                            <div class="text-sm text-gray-600">${p.nameRu}</div>
                        </div>
                        <div class="text-right">
                            <div class="text-xs text-gray-500">${p.years.join(', ')}</div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-1 mb-2">
                        ${p.medals.map(m => {
                            const color = m.includes('Gold') ? 'yellow' : m.includes('Silver') ? 'gray' : 'orange';
                            return `<span class="px-2 py-1 bg-${color}-100 text-${color}-700 text-xs rounded">${m}</span>`;
                        }).join('')}
                    </div>
                    ${p.notes ? `<div class="text-xs text-gray-500 mt-2">${p.notes}</div>` : ''}
                    <div class="text-xs text-purple-600 mt-2">Scores: ${p.scores.join(', ')} ‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí</div>
                </a>
            `).join('');
        }

        function renderLeaders() {
            if (!imoData) return;
            const container = document.getElementById('leadersList');
            container.innerHTML = imoData.leaders.map(l => `
                <div class="border border-gray-200 rounded-lg p-4 card-hover">
                    <div class="font-semibold text-gray-900">${l.name}</div>
                    <div class="text-sm text-gray-600">${l.nameRu}</div>
                    <div class="text-xs text-purple-600 mt-2">${l.role}</div>
                    <div class="text-xs text-gray-500 mt-1">${l.years.length} –ª–µ—Ç: ${l.years.join(', ')}</div>
                    ${l.notes ? `<div class="text-xs text-gray-400 mt-2">${l.notes}</div>` : ''}
                </div>
            `).join('');
        }

        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const olympiadFilter = document.getElementById('olympiadFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;

            if (!searchTerm && !olympiadFilter && !yearFilter) {
                document.getElementById('searchResults').classList.add('hidden');
                return;
            }

            document.getElementById('searchResults').classList.remove('hidden');
            
            let results = [];
            
            // Search in IMO data
            if (!olympiadFilter || olympiadFilter === 'imo') {
                if (searchTerm) {
                    // Search participants
                    results.push(...(imoData?.notableParticipants || [])
                        .filter(p => 
                            p.name.toLowerCase().includes(searchTerm) || 
                            p.nameRu.toLowerCase().includes(searchTerm)
                        )
                        .map(p => ({ type: 'participant', data: p, olympiad: 'IMO' }))
                    );
                    
                    // Search leaders
                    results.push(...(imoData?.leaders || [])
                        .filter(l => 
                            l.name.toLowerCase().includes(searchTerm) || 
                            l.nameRu.toLowerCase().includes(searchTerm)
                        )
                        .map(l => ({ type: 'leader', data: l, olympiad: 'IMO' }))
                    );
                }
            }

            // Search in IOI data
            if (!olympiadFilter || olympiadFilter === 'ioi') {
                if (searchTerm) {
                    results.push(...(ioiData?.topScorers || [])
                        .filter(p => 
                            p.name.toLowerCase().includes(searchTerm) || 
                            p.nameRu.toLowerCase().includes(searchTerm)
                        )
                        .map(p => ({ type: 'participant', data: p, olympiad: 'IOI' }))
                    );
                }
            }

            renderSearchResults(results);
        }

        function renderSearchResults(results) {
            const container = document.getElementById('searchResultsContent');
            
            if (results.length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-8">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                return;
            }

            container.innerHTML = `
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="text-sm text-gray-600 mb-4">–ù–∞–π–¥–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: ${results.length}</div>
                    <div class="space-y-4">
                        ${results.map(r => {
                            if (r.type === 'participant') {
                                return `
                                    <div class="border-l-4 border-purple-500 pl-4 py-2">
                                        <div class="font-semibold">${r.data.name} (${r.data.nameRu})</div>
                                        <div class="text-sm text-gray-600">${r.olympiad} ‚Ä¢ ${r.data.years.join(', ')}</div>
                                        <div class="text-sm text-gray-500 mt-1">${r.data.medals.join(', ')}</div>
                                        ${r.data.notes ? `<div class="text-xs text-gray-400 mt-1">${r.data.notes}</div>` : ''}
                                    </div>
                                `;
                            } else if (r.type === 'leader') {
                                return `
                                    <div class="border-l-4 border-blue-500 pl-4 py-2">
                                        <div class="font-semibold">${r.data.name} (${r.data.nameRu})</div>
                                        <div class="text-sm text-gray-600">${r.olympiad} ‚Ä¢ ${r.data.role}</div>
                                        <div class="text-sm text-gray-500 mt-1">${r.data.years.length} –ª–µ—Ç: ${r.data.years.join(', ')}</div>
                                        ${r.data.notes ? `<div class="text-xs text-gray-400 mt-1">${r.data.notes}</div>` : ''}
                                    </div>
                                `;
                            }
                        }).join('')}
                    </div>
                </div>
            `;
        }

        // Load data on page load
        loadData();
    </script>
</body>
</html>
